(function(){var a,b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e=[].slice;c=function(){},a=function(){function a(a,c){this.goForwardMonth=d(this.goForwardMonth,this),this.goBackMonth=d(this.goBackMonth,this),this.selectYear=d(this.selectYear,this),this.selectMonth=d(this.selectMonth,this),this.selectDateRange=d(this.selectDateRange,this),this.onWheel=d(this.onWheel,this),this.onMouseLeave=d(this.onMouseLeave,this),this.onMouseUp=d(this.onMouseUp,this),this.handleDateRange=d(this.handleDateRange,this),this.onMouseDown=d(this.onMouseDown,this),this.selectDay=d(this.selectDay,this);var e;this.handleElm(a),this.elm?(this.options=b.extend({},this.defaultOptions,c),this.activeDate=this.options.existingDate||(null!=(e=this.options.existingDateRange)?e[0]:void 0)||this.today,this.handleMinsAndMaxs(),this.handleTemplate(),this.bindPersistentEvents(),this.options.existingDate&&this.handleExistingDate(),this.options.existingDateRange&&this.handleExistingDateRange()):console.warn("DateJust couldn't initialize "+a+" as it's not in the DOM")}return a.prototype.defaultOptions={dragSelection:!0,scrollControl:!0,minDate:new Date((new Date).getFullYear()-10,0,1),maxDate:new Date((new Date).getFullYear()+10,11,31),onDateSelected:c,onDateRangeSelected:c},a.prototype.today=new Date,a.prototype.version="0.1.1",a.prototype.handleElm=function(a){return"string"==typeof a?this.elm=document.querySelector(a):"object"==typeof a&&a.nodeName?this.elm=a:void 0},a.prototype.handleMinsAndMaxs=function(){return this.minMonth=this.options.minDate.getMonth(),this.minYear=this.options.minDate.getFullYear(),this.maxMonth=this.options.maxDate.getMonth(),this.maxYear=this.options.maxDate.getFullYear()},a.prototype.bindPersistentEvents=function(){return this.monthSelect.addEventListener("change",this.selectMonth),this.yearSelect.addEventListener("change",this.selectYear),this.previousMonth.addEventListener("click",this.goBackMonth),this.nextMonth.addEventListener("click",this.goForwardMonth),this.days.addEventListener("click",this.selectDay),this.options.dragSelection&&(this.days.addEventListener("mousedown",this.onMouseDown),this.days.addEventListener("mousemove",this.handleDateRange),this.days.addEventListener("mouseup",this.onMouseUp),this.days.addEventListener("mouseleave",this.onMouseLeave)),this.options.scrollControl?this.days.addEventListener("wheel",b.throttle(this.onWheel,200)):void 0},a.prototype.selectDay=function(a){return a.preventDefault(),this.removeDateRangeHighlight(),"A"===a.target.tagName?(this.activeDay&&this.removeActiveDay(),this.activeDay=a.target,this.activeDay.classList.contains("in-previous-month")?(this.goBackMonth(),this.activeDay=this.days.querySelector("a.in-this-month[data-date='"+this.activeDay.dataset.date+"']")):this.activeDay.classList.contains("in-next-month")&&(this.goForwardMonth(),this.activeDay=this.days.querySelector("a.in-this-month[data-date='"+this.activeDay.dataset.date+"']")),this.activeDate=new Date(this.activeDay.dataset.date),b.addClass("active-day",this.activeDay),this.options.onDateSelected(this.activeDate)):void 0},a.prototype.removeActiveDay=function(){return b.removeClass("active-day",this.activeDay)},a.prototype.onMouseDown=function(a){return this.mouseDown=!0,this.resetDateRangeIndexes(),this.startIndex=parseInt(a.target.dataset.index)},a.prototype.handleDateRange=function(a){return a.preventDefault(),this.mouseDown?this.selectDateRange(a):void 0},a.prototype.onMouseUp=function(a){var b,c;return this.mouseDown=!1,this.endIndex?(c=new Date(this.days.querySelector("a[data-index='"+this.startIndex+"']").dataset.date),b=new Date(this.days.querySelector("a[data-index='"+this.endIndex+"']").dataset.date),this.options.onDateRangeSelected(c,b)):void 0},a.prototype.onMouseLeave=function(){return this.mouseDown=!1},a.prototype.onWheel=function(a){var c,d;return this.mouseDown||(d=b.wheelDistance(a),0===d)?void 0:(c=b.wheelDirection(a),c?this.goForwardMonth():this.goBackMonth())},a.prototype.selectDateRange=function(a){return"A"===a.target.tagName&&this.endIndex!==parseInt(a.target.dataset.index)?(this.endIndex=parseInt(a.target.dataset.index),this.activeDay&&this.removeActiveDay(),this.removeDateRangeHighlight(),this.highlightDateRange()):void 0},a.prototype.removeDateRangeHighlight=function(){var a,c,d;for(a=this.days.querySelectorAll("a"),c=0,d=[];c<a.length;)b.removeClass("day-in-range",a[c]),d.push(c++);return d},a.prototype.highlightDateRange=function(){var a,c,d,e;for(c=this.days.querySelectorAll("a"),d=0,e=[];d<c.length;)a=parseInt(c[d].dataset.index),a>=this.startIndex&&a<=this.endIndex&&b.addClass("day-in-range",c[d]),a<=this.startIndex&&a>=this.endIndex&&b.addClass("day-in-range",c[d]),e.push(d++);return e},a.prototype.handleExistingDate=function(){return this.activeDay=this.days.querySelector("a[data-date='"+this.activeDate+"']"),b.addClass("active-day",this.activeDay)},a.prototype.handleExistingDateRange=function(){return this.startIndex=parseInt(this.days.querySelector("a[data-date='"+this.options.existingDateRange[0]+"']").dataset.index),this.endIndex=parseInt(this.days.querySelector("a[data-date='"+this.options.existingDateRange[1]+"']").dataset.index),this.highlightDateRange()},a.prototype.resetDateRangeIndexes=function(){return this.startIndex=null,this.endIndex=null},a.prototype.selectMonth=function(a){var b,c,d;if(b=parseInt(a.target.value),b<this.activeDate.getMonth()){for(c=[];b<this.activeDate.getMonth();)c.push(this.goBackMonth());return c}for(d=[];b>this.activeDate.getMonth();)d.push(this.goForwardMonth());return d},a.prototype.selectYear=function(a){var b;return b=new Date(parseInt(a.target.value),this.activeDate.getMonth(),1),b<this.options.minDate?b.setMonth(this.minMonth):b>this.options.maxDate&&b.setMonth(this.maxMonth),this.activeDate=b,this.drawDate(this.activeDate),this.render(this.monthSelect,this.generateMonthOptions()),this.setMonthSelect()},a.prototype.reset=function(){var a;return this.activeDate=this.options.existingDate||(null!=(a=this.options.existingDateRange)?a[0]:void 0)||this.today,this.drawDate(this.activeDate)},a.prototype.getDayName=function(a){var b;switch(a){case 0:b="Sunday";break;case 1:b="Monday";break;case 2:b="Tuesday";break;case 3:b="Wednesday";break;case 4:b="Thursday";break;case 5:b="Friday";break;case 6:b="Saturday"}return b},a.prototype.getMonthName=function(a){var b;switch(a){case 0:b="January";break;case 1:b="February";break;case 2:b="March";break;case 3:b="April";break;case 4:b="May";break;case 5:b="June";break;case 6:b="July";break;case 7:b="August";break;case 8:b="September";break;case 9:b="October";break;case 10:b="November";break;case 11:b="December"}return b},a.prototype.getDaysInMonth=function(a,b){return new Date(b,a+1,0).getDate()},a.prototype.getPreviousMonth=function(a){return new Date(a.getFullYear(),a.getMonth()-1,1)},a.prototype.getNextMonth=function(a){return new Date(a.getFullYear(),a.getMonth()+1,1)},a.prototype.makeNewDate=function(a){var b,c,d;return c=a.getMonth(),d=a.getFullYear(),b=a.getDate(),new Date(d,c,b)},a.prototype.setDate=function(a){return a<this.options.minDate?console.warn("DateJust has a minimum date of: "+this.options.minDate):a>this.options.maxDate?console.warn("DateJust has a maximum date of: "+this.options.maxDate):(this.activeDate=a,this.drawDate(this.activeDate),this.activeDay&&this.removeActiveDay(),this.activeDay=this.days.querySelector("a[data-date='"+this.activeDate+"']"),b.addClass("active-day",this.activeDay),this.options.onDateSelected(this.activeDate))},a.prototype.goBackMonth=function(a){var b,c;return null!=a&&a.preventDefault(),c=this.getPreviousMonth(this.activeDate),b=new Date(this.makeNewDate(this.options.minDate).setDate(this.activeDate.getDate())),b>c?console.warn("DateJust has a minimum date of: "+this.options.minDate):(this.activeDate=c,this.drawDate(this.activeDate))},a.prototype.goForwardMonth=function(a){var b,c;return null!=a&&a.preventDefault(),c=this.getNextMonth(this.activeDate),b=new Date(this.makeNewDate(this.options.maxDate).setDate(this.activeDate.getDate())),c>b?console.warn("DateJust has a maximum date of: "+this.options.maxDate):(this.activeDate=c,this.drawDate(this.activeDate))},a.prototype.render=function(a,b){return a.innerHTML=b},a.prototype.handleTemplate=function(){return this.template='<div class="dj-header">\n  <div class="dj-month">\n    <span class="dj-month-name"></span>\n    <select class="dj-month-select">\n      {{monthOptions}}\n    </select>\n  </div>\n\n  <div class="dj-year">\n    <span class="dj-year-name"></span>\n    <select class="dj-year-select">\n      {{yearOptions}}\n    </select>\n  </div>\n\n  <a href="" class="previous-month">&#9654;</a>\n  <a href="" class="next-month">&#9654;</a>\n</div>\n\n<ul class="day-names">\n  <li>M</li>\n  <li>T</li>\n  <li>W</li>\n  <li>T</li>\n  <li>F</li>\n  <li>S</li>\n  <li>S</li>\n</ul>\n\n<ul class="days"></ul>',this.template=this.template.replace("{{monthOptions}}",this.generateMonthOptions()),this.template=this.template.replace("{{yearOptions}}",this.generateYearOptions()),this.render(this.elm,this.template),this.monthName=this.elm.querySelector(".dj-month-name"),this.yearName=this.elm.querySelector(".dj-year-name"),this.monthSelect=this.elm.querySelector(".dj-month-select"),this.yearSelect=this.elm.querySelector(".dj-year-select"),this.previousMonth=this.elm.querySelector(".previous-month"),this.nextMonth=this.elm.querySelector(".next-month"),this.days=this.elm.querySelector(".days"),b.addClass("dj-container",this.elm),this.drawDate(this.activeDate)},a.prototype.drawDate=function(a){return this.handleMonthControls(a),this.drawHeaderDate(a),this.drawDays(a),this.setMonthSelect(),this.setYearSelect(),this},a.prototype.handleMonthControls=function(a){return this.minYear===a.getFullYear()&&this.minMonth===a.getMonth()?b.addClass("hidden",this.previousMonth):this.maxYear===a.getFullYear()&&this.maxMonth===a.getMonth()?b.addClass("hidden",this.nextMonth):(b.hasClass("hidden",this.previousMonth)&&b.removeClass("hidden",this.previousMonth),b.hasClass("hidden",this.nextMonth)?b.removeClass("hidden",this.nextMonth):void 0)},a.prototype.drawHeaderDate=function(a){var b,c;return c=a.getFullYear(),b=this.getMonthName(a.getMonth()),this.render(this.monthName,b),this.render(this.yearName,c)},a.prototype.drawDays=function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(j=this.getDaysInMonth(a.getMonth(),a.getFullYear()),r=this.getDayName(new Date(this.makeNewDate(a).setDate(1)).getDay()),n=this.getDayName(new Date(this.makeNewDate(a).setDate(j)).getDay()),q=this.getPreviousMonth(a),p=this.getNextMonth(a),k=this.getDaysInMonth(q.getMonth(),q.getFullYear()),m="",i={Sunday:6,Monday:0,Tuesday:1,Wednesday:2,Thursday:3,Friday:4,Saturday:5},h={Sunday:0,Monday:6,Tuesday:5,Wednesday:4,Thursday:3,Friday:2,Saturday:1},l=i[r],g=0,o=1;l>=o;)e=k-l+o,f=new Date(this.makeNewDate(q).setDate(e)),c=this.isDateInBounds(f),m+='<li>\n  <a href="" class="in-previous-month'+c+'" data-index="'+g+'" data-date="'+f+'">\n   '+e+"\n  </a>\n</li>",g++,o++;for(o=1;j>=o;)f=new Date(this.makeNewDate(a).setDate(o)),c=this.isDateInBounds(f),m+='<li>\n  <a href="" class="in-this-month'+c+'" data-index="'+g+'" data-date="'+f+'">\n   '+o+"\n  </a>\n</li>",g++,o++;for(o=1;o<=h[n];)f=new Date(this.makeNewDate(p).setDate(o)),c=this.isDateInBounds(f),m+='<li>\n  <a href="" class="in-next-month'+c+'" data-index="'+g+'" data-date="'+f+'">\n   '+o+"\n  </a>\n</li>",g++,o++;return this.render(this.days,m),a.getFullYear()===this.today.getFullYear()&&a.getMonth()===this.today.getMonth()?(d=new Date(this.makeNewDate(this.today).setHours(0,0,0)),s=this.days.querySelector("a[data-date='"+d+"']"),b.addClass("todays-date",s)):void 0},a.prototype.isDateInBounds=function(a){return this.options.minDate&&a<this.options.minDate?" disabled-date":this.options.maxDate&&a>this.options.maxDate?" disabled-date":" "},a.prototype.setMonthSelect=function(){return this.monthSelect.value=this.activeDate.getMonth()},a.prototype.setYearSelect=function(){return this.yearSelect.value=this.activeDate.getFullYear()},a.prototype.generateMonthOptions=function(){var a,b,c,d;for(c="",a=0,d=11,this.minYear===this.activeDate.getFullYear()&&(a=this.minMonth),this.maxYear===this.activeDate.getFullYear()&&(d=this.maxMonth);d>=a;)b=this.getMonthName(a),c+="<option value='"+a+"'>"+b+"</option>",a++;return c},a.prototype.generateYearOptions=function(){var a,b;for(b="",a=this.minYear;a<=this.maxYear;)b+="<option value='"+a+"'>"+a+"</option>",a++;return b},a}(),window.DateJust=a,b={extend:function(){var a,b,c,d,f,g,h;for(g=arguments[0],f=2<=arguments.length?e.call(arguments,1):[],a=0,c=f.length;c>a;a++){d=f[a];for(b in d)h=d[b],g[b]=h}return g},addClass:function(a,b){return b.classList.add(a)},removeClass:function(a,b){return b.classList.remove(a)},hasClass:function(a,b){return b.classList.contains(a)},throttle:function(a,b,c){var d,e,f,g,h,i;return e=void 0,d=void 0,h=void 0,i=null,g=0,c||(c={}),f=function(){g=c.leading===!1?0:Date.now(),i=null,h=a.apply(e,d),i||(e=d=null)},function(){var j,k;return j=Date.now(),g||c.leading!==!1||(g=j),k=b-(j-g),e=this,d=arguments,0>=k||k>b?(i&&(clearTimeout(i),i=null),g=j,h=a.apply(e,d),i||(e=d=null)):i||c.trailing===!1||(i=setTimeout(f,k)),h}},wheelDistance:function(a){var b,c;return c=a.wheelDelta,b=a.detail,b?c?c/b/40*b>0?1:-1:-b/3:c/120},wheelDirection:function(a){return a.detail<0?!0:a.wheelDelta>0}}}).call(this);